import{a as x,i as a,c as _,u as f,S as w,d as C,t as s,b as S,F as k}from"./index-BD8P7jxS.js";import{R as y}from"./studyrepo-DDL1bX-M.js";import"./chess_pgn_logic-CUe21FD7.js";var b=s("<div class=category><h1></h1><ul>"),I=s("<li class=soon><h3></h3><span>Coming Soon"),N=s("<li><h3>"),P=s('<input style=padding:0.2em;margin:0.2em; type=text placeholder="Short Id">'),F=s('<textarea placeholder="Paste Study PGN"rows=10 cols=40>'),G=s("<div class=repertoires><div class=categories><div class=category><h1>Import New Study </h1><div style=display:flex;flex-flow:column;gap:0.2em;><button style=align-self:flex-end;padding:1em;>Import"),R=s('<input style=padding:0.2em;margin:0.3em; type=text placeholder="lichess study link">'),A=s("<a style=cursor:pointer;> or Paste PGN ");const v=o=>{const m=S();return(()=>{var n=b(),u=n.firstChild,g=u.nextSibling;return a(u,()=>o.name),a(g,_(k,{get each(){return o.list},children:l=>_(w,{get fallback(){return(()=>{var r=N(),e=r.firstChild;return r.$$click=()=>m(`/${l.category.toLowerCase()}/${l.study_id}`),a(e,()=>l.study_name),r})()},get when(){return l.study_id===""},get children(){var r=I(),e=r.firstChild;return a(e,()=>l.study_name),r}})})),n})()};function j(){let o=y;const m=async()=>{let e;if(l()){let i=g.value;if(e=u.value,i.length<3||i.length>20||e.length<30)return;y.save_import_pgn(i,e)}else{let d=n.value.match(/https:\/\/lichess.org\/study\/(\w*)\/?/);if(!d){n.value="Incorrect lichess study";return}let $=d[0],p=d[1];e=await fetch(`https://lichess.org/api/study/${p}.pgn`).then(h=>h.text()),y.save_import_pgn(p,e,$)}window.location.reload()};let n,u,g;const[l,r]=x(!1);return(()=>{var e=G(),i=e.firstChild,d=i.firstChild,$=d.firstChild,p=$.nextSibling,h=p.firstChild;return a(p,_(w,{get when(){return l()},get fallback(){return[(()=>{var t=R();return f(c=>n=c,t),t})(),(()=>{var t=A();return t.$$click=()=>{r(!0)},t})()]},get children(){return[(()=>{var t=P();return f(c=>g=c,t),t})(),(()=>{var t=F();return f(c=>u=c,t),t})()]}}),h),h.$$click=()=>m(),a(i,_(v,{name:"Imported",get list(){return o.imported[0]()}}),null),a(i,_(v,{name:"Auto Generated",get list(){return o.openings}}),null),e})()}C(["click"]);export{j as default};
