import{c as _,g as G,au as H,a5 as N,u as Z,t as d,i as r,e as M,A as ee,F as O,k as te,l as p,b as c,V as se,aa as I,d as le}from"./index-BBIA_7rS.js";var ne=d("<div class=header><h4>Selected <span class=number></span> sections</h4><h4>Total <span class=number></span> chapters "),j=d("<h4> Memorize due moves through Spaced Repetition "),ie=d("<p> Select a due move category below to start playing. "),re=d("<div class=filler>"),de=d("<div class=dues><button><span>First 10 moves</span><span class=due>Due: </span></button><button><span>10-20 moves</span><span class=due> Due: </span></button><button><span>20+ moves</span><span class=due> Due: </span></button><button><span>White moves</span><span class=due> Due: </span></button><button><span>Black moves</span><span class=due> Due: "),ae=d("<div class=content>"),_e=d("<main class=repetition><div class=studies-list><div class=header><h3>Select an Opening</h3></div><div class=list></div></div><div class=sections-list-multiple><div class=header><h3>Select multiple Sections</h3></div><div class=list></div></div><div class=repeat-info>"),ce=d("<div class=no-study>No openings here. "),ue=d("<div class=study>"),oe=d("<div class=no-section>No sections to show. Select some openings first."),pe=d("<div class=section>"),ge=d("<div class=loading>Loading..."),he=d("<div class=no-selected-sections>Please select some sections.");const be=()=>_(ve,{});function fe(t){return t.card.due.getTime()<new Date().getTime()}function z(t){return t.ply<=20}function A(t){return t.ply>20&&t.ply<=40}function V(t){return t.ply>40}function W(t){return I(t.before_fen)==="white"}function q(t){return I(t.before_fen)==="black"}function $e(){let[t]=G(),[u]=H();const k=c(()=>Object.values(t.studies)),v=c(()=>{if(!u.repeat_selected_study_id)return;let e=t.studies[u.repeat_selected_study_id];if(e)return e.section_ids.map(C=>e.sections.find(S=>S.id===C))}),m=c(()=>u.repeat_selected_study_id),s=se(()=>u.repeat_selected_study_id),g=e=>u.selected_section_ids[u.repeat_selected_study_id]?.includes(e),h=c(()=>v()?.filter(e=>g(e.id))??[]),b=c(()=>h().map(e=>e.id)),w=c(()=>{let e=m();if(e)return t.studies[e]}),o=c(()=>t.chapters.list.filter(e=>b().includes(e.section_id))),n=c(()=>t.due_moves.list),a=c(()=>t.due_moves.list.filter(e=>!e.attempts[0]||fe(e.attempts[0])));return{isSelectedStudy:s,isSelectedSection:g,get selected_study_id(){return m()},get study(){return w()},get studies(){return k()},get sections(){return v()},get selected_sections(){return h()},get selected_section_ids(){return b()},get all_chapters_selected(){return o()},get due_first_ten(){return a().filter(e=>z(e.tree_step_node.step))},get due_ten_twenty(){return a().filter(e=>A(e.tree_step_node.step))},get due_twenty_plus(){return a().filter(e=>V(e.tree_step_node.step))},get due_white(){return a().filter(e=>W(e.tree_step_node.step))},get due_black(){return a().filter(e=>q(e.tree_step_node.step))},get all_first_ten(){return n().filter(e=>z(e.tree_step_node.step))},get all_ten_twenty(){return n().filter(e=>A(e.tree_step_node.step))},get all_twenty_plus(){return n().filter(e=>V(e.tree_step_node.step))},get all_white(){return n().filter(e=>W(e.tree_step_node.step))},get all_black(){return n().filter(e=>q(e.tree_step_node.step))}}}function ve(){let[,{load_studies:t,load_chapters_for_sections:u,load_due_moves:k}]=G(),[,{set_repeat_selected_study:v,toggle_repeat_study_section:m}]=H(),s=$e();const g=()=>{u(s.selected_section_ids)},h=()=>{let n=s.selected_study_id,a=s.selected_section_ids;n&&a.length>0&&k(n,a)};N(()=>t("mine")),N(g),N(h);const b=n=>{m(n),g(),h()};let w=Z();const o=n=>{w("/repetition/"+s.selected_study_id+"?filter="+n)};return(()=>{var n=_e(),a=n.firstChild,e=a.firstChild,C=e.nextSibling,S=a.nextSibling,J=S.firstChild,K=J.nextSibling,Q=S.nextSibling;return r(C,_(O,{get each(){return s.studies},get fallback(){return(()=>{var l=ce();return l.firstChild,r(l,_(ee,{href:"/openings",children:"Build some openings first."}),null),l})()},children:l=>(()=>{var i=ue();return i.$$click=()=>v(s.isSelectedStudy(l.id)?void 0:l.id),r(i,()=>l.name),M(()=>i.classList.toggle("active",!!s.isSelectedStudy(l.id))),i})()})),r(K,_(O,{get each(){return s.sections},get fallback(){return oe()},children:l=>(()=>{var i=pe();return i.$$click=()=>b(l.id),r(i,()=>l.name),M(()=>i.classList.toggle("selected",!!s.isSelectedSection(l.id))),i})()})),r(Q,_(p,{get fallback(){return ge()},get children(){return[(()=>{var l=ne(),i=l.firstChild,f=i.firstChild,x=f.nextSibling,y=i.nextSibling,$=y.firstChild,D=$.nextSibling;return r(x,()=>s.selected_sections.length),r(D,()=>s.all_chapters_selected.length),l})(),(()=>{var l=ae();return r(l,_(te,{get when(){return s.selected_sections.length>0},get fallback(){return[j(),he()]},get children(){return[j(),ie(),re(),(()=>{var i=de(),f=i.firstChild,x=f.firstChild,y=x.nextSibling;y.firstChild;var $=f.nextSibling,D=$.firstChild,P=D.nextSibling;P.firstChild;var L=$.nextSibling,U=L.firstChild,R=U.nextSibling;R.firstChild;var F=L.nextSibling,X=F.firstChild,T=X.nextSibling;T.firstChild;var B=F.nextSibling,Y=B.firstChild,E=Y.nextSibling;return E.firstChild,f.$$click=()=>o("first-ten"),r(y,_(p,{fallback:"..",get children(){return s.due_first_ten?.length??".."}}),null),$.$$click=()=>o("ten-twenty"),r(P,_(p,{fallback:"..",get children(){return s.due_ten_twenty?.length??".."}}),null),L.$$click=()=>o("twenty-plus"),r(R,_(p,{fallback:"..",get children(){return s.due_twenty_plus?.length??".."}}),null),F.$$click=()=>o("white"),r(T,_(p,{fallback:"..",get children(){return s.due_white?.length??".."}}),null),B.$$click=()=>o("black"),r(E,_(p,{fallback:"..",get children(){return s.due_black?.length??".."}}),null),i})()]}})),l})()]}})),n})()}le(["click"]);export{$e as createRepeatProps,be as default};
