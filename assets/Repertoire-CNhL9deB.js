var F=Object.defineProperty;var O=(c,t,_)=>t in c?F(c,t,{enumerable:!0,configurable:!0,writable:!0,value:_}):c[t]=_;var P=(c,t,_)=>(O(c,typeof t!="symbol"?t+"":t,_),_);import{h as j,j as q,k as C,b as B,l as $,o as R,m as G,i as o,c as n,F as K,f as I,g as Q,S as M,e as U,M as A,n as W,s as Y,d as z,t as s,p as H}from"./index-DigfKJAO.js";/* empty css                   */import{S as J}from"./studyrepo-D9Gz3VcT.js";import{S as V,C as X}from"./Shalala-B52gRouf.js";import{C as Z,T as ee}from"./Chesstree2-DxHWZB2U.js";import{I as te}from"./chess_pgn_logic-AUo9Luh0.js";var re=s("<div class=progress><div class=bar></div><h3>"),le=s("<div class=list-wrap><h1 class=header>Repertoire</h1><div class=list><div><h3 class=title></h3></div><ul>"),ae=s("<div class=repertoire>"),se=s("<li><div><h3></h3> "),ie=s("<div class=board-wrap>"),ne=s("<h2>Select an Option"),oe=s("<button><span> Play all Moves "),ce=s("<button><span> Play as Match "),_e=s("<h2>Play as Match"),de=s("<small> AI will play the next move picking a random variation "),he=s("<div class=in_mode><button><span> Rematch </span></button><button class=end2><span> End Practice "),me=s("<h2>Play all moves"),ue=s("<div class=in_mode><button><span> Clear </span></button><button class=end2><span> End Practice "),pe=s("<div class=replay-wrap><div class=replay-header><div class=title><h5>Slav Defense</h5><h4></h4></div><h3 class=lichess><a target=_blank>lichess</a></h3></div><div class=replay><div class=replay-v></div><div class=tools>");class $e{constructor(){P(this,"_mode");P(this,"_match_color");this._mode=C(void 0,{equals:!1}),this._match_color=C("white")}get mode(){return this._mode[0]()}set mode(t){this._mode[1](t)}get match_color(){return this._match_color[0]()}set match_color(t){this._match_color[1](t)}flip_match_color(){this.match_color=this.match_color==="white"?"black":"white"}}const L=c=>(()=>{var t=re(),_=t.firstChild,S=_.nextSibling;return o(S,()=>`%${c.width}`),I(g=>H(_,`width: ${c.width}%`,g)),t})(),ye=()=>{const c=j(),[t]=q(c.id,J.read_study),[_,S]=C(0),g=B(()=>{var e;return(e=t())==null?void 0:e.chapters[_()]});let d=new V,[m,T]=C(void 0);$(()=>{l.mode;let e=g();if(e){let r=ee.make(e.pgn.tree.clone);T(r)}}),$(()=>{let{mode:e,match_color:r}=l;e==="match"&&r==="black"&&setTimeout(()=>{var a;(a=m())==null||a.reveal_one_random()},400)}),$(R(()=>d.add_uci,e=>{var a;if(!e)return;((a=m())==null?void 0:a.try_next_uci_fail(e))&&l.mode==="match"&&setTimeout(()=>{var h;(h=m())==null||h.reveal_one_random()},400)})),$(R(()=>{var e;return(e=m())==null?void 0:e.fen_last_move},e=>{if(e){let[r,a]=e;d.on_set_fen_uci(r,a)}else d.on_set_fen_uci(te)})),$(R(()=>d.on_wheel,e=>{var r;e&&((r=m())==null||r.on_wheel(e))}));const N=e=>{e.key==="f"&&l.flip_match_color()};document.addEventListener("keypress",N),G(()=>{document.removeEventListener("keypress",N)});const D=e=>{const r=e.target;r.tagName!=="PIECE"&&r.tagName!=="SQUARE"&&r.tagName!=="CG-BOARD"||(e.preventDefault(),d.set_on_wheel(Math.sign(e.deltaY)))};let l=new $e;return $(()=>{var e;l.match_color=((e=t())==null?void 0:e.orientation)??"white"}),(()=>{var e=ae();return e.addEventListener("wheel",D),o(e,n(M,{get when(){return!t.loading},fallback:"Loading...",get children(){var r=le(),a=r.firstChild,h=a.nextSibling,u=h.firstChild,y=u.firstChild,k=u.nextSibling;return o(y,()=>t().name),o(u,n(L,{width:30}),null),o(k,n(K,{get each(){return t().chapters},children:(x,b)=>(()=>{var p=se(),v=p.firstChild,w=v.firstChild;return w.nextSibling,p.$$click=()=>S(b()),o(w,()=>x.name),o(v,n(L,{width:0}),null),I(()=>Q(p,b()===_()?"active":"")),p})()})),r}}),null),o(e,n(M,{get when(){return g()},children:r=>[(()=>{var a=ie();return o(a,n(X,{get orientation(){return l.match_color},get movable(){return l.mode!==void 0},get doPromotion(){return d.promotion},get onMoveAfter(){return d.on_move_after},get fen_uci(){return d.fen_uci},get color(){return d.turnColor},get dests(){return d.dests}})),a})(),(()=>{var a=pe(),h=a.firstChild,u=h.firstChild,y=u.firstChild,k=y.nextSibling,x=u.nextSibling,b=x.firstChild,p=h.nextSibling,v=p.firstChild,w=v.nextSibling;return o(k,()=>r().name),o(v,n(M,{get when(){return m()},children:i=>n(Z,{get lala(){return i()}})})),o(w,n(U,{get children(){return[n(A,{get when(){return l.mode===void 0},get children(){return[ne(),(()=>{var i=oe();return i.$$click=()=>l.mode="moves",i})(),(()=>{var i=ce();return i.$$click=()=>l.mode="match",i})()]}}),n(A,{get when(){return l.mode==="match"},get children(){return[_e(),de(),(()=>{var i=he(),f=i.firstChild,E=f.nextSibling;return f.$$click=()=>{W(()=>{l.mode="match",l.flip_match_color()})},E.$$click=()=>l.mode=void 0,i})()]}}),n(A,{get when(){return l.mode==="moves"},get children(){return[me(),(()=>{var i=ue(),f=i.firstChild,E=f.nextSibling;return f.$$click=()=>{l.mode="moves"},E.$$click=()=>l.mode=void 0,i})()]}})]}})),I(()=>Y(b,"href",r().site)),a})()]}),null),e})()};z(["click"]);export{ye as default};
