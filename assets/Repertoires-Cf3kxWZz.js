import{u as C,a as S,i,c as _,b as f,S as x,d as k,t as a,e as b,F as I,R}from"./index-Dq-dqWGa.js";import{R as v}from"./studyrepo-D5C5xQjo.js";var N=a("<div class=category><h1></h1><ul>"),P=a("<li class=soon><h3></h3><span>Coming Soon"),F=a("<li><h3>"),G=a('<input style=padding:0.2em;margin:0.2em; type=text placeholder="Short Id">'),A=a('<textarea placeholder="Paste Study PGN"rows=10 cols=40>'),B=a("<div class=repertoires><div class=categories><div class=category><h1>Import New Study </h1><div style=display:flex;flex-flow:column;gap:0.2em;><button style=align-self:flex-end;padding:1em;>Import"),D=a('<input style=padding:0.2em;margin:0.3em; type=text placeholder="lichess study link">'),E=a("<a style=cursor:pointer;> or Paste PGN ");const w=g=>{const h=b();return(()=>{var m=N(),n=m.firstChild,$=n.nextSibling;return i(n,()=>g.name),i($,_(I,{get each(){return g.list},children:r=>_(x,{get fallback(){return(()=>{var t=F(),u=t.firstChild;return t.$$click=()=>h(`/${r.category.toLowerCase()}/${r.study_id}`),i(u,()=>r.study_name),t})()},get when(){return r.study_id===""},get children(){var t=P(),u=t.firstChild;return i(u,()=>r.study_name),t}})})),m})()};function j(){const g=C(R);let h=v;const m=async()=>{let l;if(t()){let s=r.value;if(l=$.value,s.length<3||s.length>20||l.length<30)return;v.save_import_pgn(s,l)}else{let c=n.value.match(/https:\/\/lichess.org\/study\/(\w*)\/?/);if(!c){n.value="Incorrect lichess study";return}let y=c[0],o=c[1];l=await fetch(`https://lichess.org/api/study/${o}.pgn`).then(d=>d.text()),v.save_import_pgn(o,l,y);try{await g.import_study_from_lichess_id(o,l)}catch(d){console.log(d)}}window.location.reload()};let n,$,r;const[t,u]=S(!1);return(()=>{var l=B(),s=l.firstChild,c=s.firstChild,y=c.firstChild,o=y.nextSibling,d=o.firstChild;return i(o,_(x,{get when(){return t()},get fallback(){return[(()=>{var e=D();return f(p=>n=p,e),e})(),(()=>{var e=E();return e.$$click=()=>{u(!0)},e})()]},get children(){return[(()=>{var e=G();return f(p=>r=p,e),e})(),(()=>{var e=A();return f(p=>$=p,e),e})()]}}),d),d.$$click=()=>m(),i(s,_(w,{name:"Imported",get list(){return h.imported[0]()}}),null),i(s,_(w,{name:"Auto Generated",get list(){return h.openings}}),null),l})()}k(["click"]);export{j as default};
