import{k as G,H as L,c as a,S as w,N as K,f as r,a as f,r as U,u as V,i as o,l as X,D as Z,I as ee,n as E,d as te,t as c,J as H,q as T,x as q,m as ne}from"./index-RjQl72wL.js";import{a as re,D as se}from"./types-DPx0fTjV.js";import{S as ae,C as oe}from"./Chessboard-C55Ecq44.js";import{C as ie,a as ue}from"./ChessTreeWithTools-C9Q_bCUO.js";import"./Chesstree2-CBQPm56R.js";var le=c("<div class=repeat-dues>"),ce=c("<p>Completed All Due Moves."),_e=c("<div class=header><h3></h3><p></p><p> Due Moves"),de=c("<div class=board-wrap>"),he=c("<button>Hint: Show Previous Moves"),pe=c("<button>Show Answer"),me=c("<button>Next Due"),ve=c("<div class=info>"),ge=c("<div class=replay-wrap><div class=replay-header><div class=title><h3></h3><h4>"),fe=c("<span>Repeat Not Found");function we(t){return t[Math.floor(Math.random()*t.length)]}const Ne=()=>{let t=G();const d=parseInt(t.id),s=L(H),i=re(()=>s.repeat_by_id(d));return a(w,{get when(){return i()},get fallback(){return a(Se,{})},children:n=>a($e,{get repeats(){return n()}})})},$e=t=>{const[d]=K(),s=r(()=>t.repeats),i=r(()=>new se(s())),n=r(()=>{switch(d.filter){case"white":return i().due_white;case"black":return i().due_black;case"first-ten":return i().due_10;case"ten-twenty":return i().due_10_20;case"twenty-plus":return i().due_20plus;default:return i().due}}),N=r(()=>{switch(d.filter){case"white":return"White Only";case"black":return"Black Only";case"first-ten":return"First 10 moves";case"ten-twenty":return"10-20 moves";case"twenty-plus":return"20+ moves";default:return"All moves"}}),S=r(()=>we(n())),[P,C]=f(void 0,{equals:!1});let u;return U(()=>{u.addEventListener("wheel",p=>{C(Math.sign(p.deltaY))},{passive:!0})}),(()=>{var p=le();return V(g=>u=g,p),o(p,a(w,{get when(){return S()},get fallback(){return ce()},children:g=>[(()=>{var k=_e(),x=k.firstChild,$=x.nextSibling,D=$.nextSibling,b=D.firstChild;return o(x,()=>s().name),o($,N),o(D,()=>n().length,b),k})(),a(be,{get on_wheel(){return P()},get repeats(){return s()},get due_move(){return g()}})]})),p})()},be=t=>{const[d]=X(()=>t.due_move.ucis[0].section.study_id,s=>ne.read_section_study(s));return a(w,{get when(){return d()},children:s=>a(ye,{get on_wheel(){return t.on_wheel},get repeats(){return t.repeats},get due_move(){return t.due_move},get study(){return s()}})})},ye=t=>{const d=L(H),s=r(()=>t.study),i=r(()=>t.repeats),n=r(()=>t.due_move),N=r(()=>s().sections.find(e=>e.name===n().ucis[0].section.section_name)),S=r(()=>N().chapters.find(e=>e.name===n().ucis[0].section.chapter_name)),[P,C]=f(void 0),u=new ae;let[p,g]=f(void 0);const k=r(()=>Z(n()?.fen??ee));E(T(n,()=>{q(()=>{y(void 0),b([]),$(n().ucis[0].path.slice(0,-1))})}));const[x,$]=f(n().ucis[0].path.slice(0,-1),{equals:!1}),[D,b]=f([]);E(T(()=>u.add_uci,e=>{if(!e)return;const _=n();let[h,M]=e;const A=_.ucis.map(z=>z.uci);let v="✓",l="✗";const R=m();let F=v;A.includes(h)?(F=v,R||y("easy")):(F=l,R||y("again")),C(ue(h,M,F)),g(setTimeout(I,600))}));const O=([e,_])=>{u.on_set_fen_uci(e,_)},W=()=>{if(m()==="again")return!1;y("hard"),b(n().ucis[0].path)},B=()=>{y("again"),b(void 0),$(n().ucis[0].path)},[m,y]=f(void 0),I=()=>{const e=i().id,_=n().fen,h=m();!h||h==="hard"||q(()=>{C(void 0),d.play_due_move(e,_,h??"again"),g(void 0)})},J=r(()=>{const e=m();return!(!e||e==="hard")}),Q=r(()=>m()===void 0),Y=r(()=>m()!=="again"),j=r(()=>{let e=p(),_=m();return e===void 0&&_!=="again"});return[(()=>{var e=de();return o(e,a(oe,{get shapes(){return P()},get orientation(){return k()},get movable(){return j()},get doPromotion(){return u.promotion},get onMoveAfter(){return u.on_move_after},get fen_uci(){return u.fen_uci},get color(){return u.turnColor},get dests(){return u.dests}})),e})(),(()=>{var e=ge(),_=e.firstChild,h=_.firstChild,M=h.firstChild,A=M.nextSibling;return o(M,()=>s().name),o(A,()=>S().name),o(e,a(ie,{get hide_after_path(){return D()},get on_wheel(){return t.on_wheel},get pgn(){return S().pgn},on_fen_last_move:O,get cursor_path(){return x()},get children(){var v=ve();return o(v,a(w,{get when(){return Q()},get children(){var l=he();return l.$$click=W,l}}),null),o(v,a(w,{get when(){return Y()},get children(){var l=pe();return l.$$click=B,l}}),null),o(v,a(w,{get when(){return J()},get children(){var l=me();return l.$$click=I,l}}),null),v}}),null),e})()]},Se=()=>fe();te(["click"]);export{Ne as default};
