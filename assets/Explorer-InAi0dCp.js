import{a as M,l as K,f as C,m as S,i as o,c as d,h as R,F as j,S as D,n as O,q,r as B,u as Q,j as x,d as U,t as _,p as y}from"./index-CaVDKa1_.js";import{S as W,C as Y}from"./Shalala-CrGIVDxX.js";import{T as z,C as H}from"./Chesstree2-DfHIwYJt.js";import{R as J,S as V}from"./studyrepo-DdQtQ0jx.js";import{I as X}from"./chess_pgn_logic-sdK2B0op.js";import{s as Z}from"./scroll-DnAhRpRC.js";var ee=_("<div class=explorer><div class=e-studies><h3>Studies</h3><select></select><div class=e-chapters><h3>Chapters</h3></div></div><div class=e-chapter-wrap>"),G=_("<option>"),te=_("<span> Loading ... "),ae=_("<select>"),re=_("<span>Loading..."),ne=_("<div class=explorer-chapter><div class=board-wrap></div><div class=replay-wrap><div class=replay-header><h3></h3></div><div class=replay><div class=replay-v></div><div class=replay-jump><button data-icon=></button><button data-icon=></button><button data-icon=></button><button data-icon=></button></div><div class=replay-tools>");const ve=()=>{let g=J.all.filter(s=>s.study_link!==""&&s.category!=="Tactics");const[E,w]=M(0),[f]=K(()=>g[E()].study_link,s=>V.read_study(s)),[m,b]=M(0),a=C(()=>f()?.chapters),t=C(()=>a()?.[m()]);return S(y(f,()=>{b(0)})),(()=>{var s=ee(),v=s.firstChild,u=v.firstChild,e=u.nextSibling,r=e.nextSibling;r.firstChild;var p=v.nextSibling;return e.addEventListener("change",l=>w(parseInt(l.currentTarget.value))),o(e,d(j,{each:g,children:(l,c)=>(()=>{var i=G();return o(i,()=>l.study_name),R(()=>i.value=c()),i})()})),o(r,d(D,{get when(){return a()},get fallback(){return te()},children:l=>(()=>{var c=ae();return c.addEventListener("change",i=>b(parseInt(i.currentTarget.value))),o(c,d(j,{get each(){return l()},children:(i,$)=>(()=>{var h=G();return o(h,()=>i.name),R(()=>h.value=$()),h})()})),c})()}),null),o(p,d(D,{get when(){return t()},get fallback(){return re()},children:l=>d(se,{get pgn_chapter(){return l()}})})),s})()},se=g=>{const E=O(),w=()=>!1,f=()=>"white",m=()=>g.pgn_chapter,b=C(()=>m().pgn),a=new W,t=C(()=>z.make(b().tree));S(y(()=>t().fen_last_move,e=>{if(e){let[r,p]=e;a.on_set_fen_uci(r,p)}else a.on_set_fen_uci(X)})),S(y(()=>a.on_wheel,e=>{e&&t().on_wheel(e)}));const s=e=>{e.key};S(y(()=>t().tree?.get_at(t().cursor_path),e=>{e&&E.move(e)})),q(()=>{document.addEventListener("keypress",s)}),B(()=>{document.removeEventListener("keypress",s)});const v=Z(e=>{const r=e.target;r.tagName!=="PIECE"&&r.tagName!=="SQUARE"&&r.tagName!=="CG-BOARD"||(e.preventDefault(),a.set_on_wheel(Math.sign(e.deltaY)))});let u;return q(()=>{u.addEventListener("wheel",v,{passive:!1})}),B(()=>{u.removeEventListener("wheel",v)}),(()=>{var e=ne(),r=e.firstChild,p=r.nextSibling,l=p.firstChild,c=l.firstChild,i=l.nextSibling,$=i.firstChild,h=$.nextSibling,k=h.firstChild,L=k.nextSibling,I=L.nextSibling,N=I.nextSibling;return Q(n=>u=n,e),o(r,d(Y,{get orientation(){return f()},get movable(){return w()},get doPromotion(){return a.promotion},get onMoveAfter(){return a.on_move_after},get fen_uci(){return a.fen_uci},get color(){return a.turnColor},get dests(){return a.dests}})),o(c,()=>m().name),o($,d(H,{get lala(){return t()}})),k.$$click=()=>t().navigate_first(),L.$$click=()=>t().navigate_prev(),I.$$click=()=>t().navigate_next(),N.$$click=()=>t().navigate_last(),R(n=>{var T="fbt first"+(t().can_navigate_prev?"":" disabled"),P="fbt prev"+(t().can_navigate_prev?"":" disabled"),A="fbt next"+(t().can_navigate_next?"":" disabled"),F="fbt last"+(t().can_navigate_next?"":" disabled");return T!==n.e&&x(k,n.e=T),P!==n.t&&x(L,n.t=P),A!==n.a&&x(I,n.a=A),F!==n.o&&x(N,n.o=F),n},{e:void 0,t:void 0,a:void 0,o:void 0}),e})()};U(["click"]);export{ve as default};
