var Zt=Object.defineProperty;var ti=(n,i,e)=>i in n?Zt(n,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[i]=e;var ut=(n,i,e)=>(ti(n,typeof i!="symbol"?i+"":i,e),e);import{l as vt,i as t,c as g,D as ii,f as E,g as S,d as ei,t as m,u as li,b as A,F as gt,s as I}from"./index-CUHX3pYO.js";import{O as si,S as ai}from"./SessionStore-7Ws8UuIJ.js";import{R as D}from"./studyrepo-B70K42_7.js";import"./chess_pgn_logic-D6xT6ju7.js";var ni=m("<div class=dashboard><div class=tabs><div>Openings</div><div>Masters</div><div>Endgames</div><div>Tactics</div></div><div class=content>"),ri=m("<div class=openings><div class=list></div><div class=one><h2></h2><div class=challenges><div class=challenge-wrap><div class=title><h3>All Chapters</h3><span>%</span></div><div class=practice><h4>Practice<small> (The minimum progress of all chapters) </small></h4><ul><li style=width:30%>30%</li><li style=width:30%>60%</li><li style=width:30%>90%</li><li style=width:10%>100%</li></ul></div><div class=quiz-wrap><div class=deathmatch><h4>Deathmatch</h4><button>Play Deathmatch on All Chapters</button><div class=stats><span>Attempted: <!>/100</span><div><span class=passed>Passed: <!>/</span><span class=failed>Failed: <!>/</span></div></div></div><div class=quiz><h4>Quiz</h4><button>Take Quiz on All Chapters</button><div class=stats><span>Attempted: <!>/100</span><div><span class=passed>Passed: <!>/</span><span class=failed>Failed: <!>/"),hi=m("<div>"),di=m("<div class=challenge-wrap><div class=title><h3>Chapters <!>-</h3><span>%</span></div><div class=practice><h4>Practice</h4><ul><li style=width:30%>30%</li><li style=width:30%>60%</li><li style=width:30%>90%</li><li style=width:10%>100%</li></ul></div><div class=quiz-wrap><div class=deathmatch><h4>Deathmatch</h4><button>Play Deathmatch on Chapters <!>-</button><div class=stats><span>Attempted: <!>/100</span><div><span class=passed>Passed: <!>/</span><span class=failed>Failed: <!>/</span></div></div></div><div class=quiz><h4>Quiz</h4><button>Take Quiz on Chapters <!>-</button><div class=stats><span>Attempted: <!>/100</span><div><span class=passed>Passed: <!>/</span><span class=failed>Failed: <!>/"),ci=m("<div class=progress><div class=bar>"),_i=m('<div class=progress><div class="bar pass"></div><div class="bar fail">');const zi=()=>{const[n,i]=vt("openings"),e=r=>n()===r?"active":"";return(()=>{var r=ni(),d=r.firstChild,h=d.firstChild,l=h.nextSibling,_=l.nextSibling,p=_.nextSibling,u=d.nextSibling;return h.$$click=()=>i("openings"),l.$$click=()=>i("masters"),_.$$click=()=>i("endgames"),p.$$click=()=>i("tactics"),t(u,g(ii,{get component(){return fi[n()]}})),E(a=>{var c=e("openings"),v=e("masters"),f=e("endgames"),o=e("tactics");return c!==a.e&&S(h,a.e=c),v!==a.t&&S(l,a.t=v),f!==a.a&&S(_,a.a=f),o!==a.o&&S(p,a.o=o),a},{e:void 0,t:void 0,a:void 0,o:void 0}),r})()};class pi{constructor(i){ut(this,"chapters");this.study_id=i;let{nb_chapters:e}=D.study_by_id(i);this.chapters=[...Array(e).keys()].map(r=>new si(i,r))}get all_sections(){return this.make_openings_section_stats(0,this.chapters.length)}get sections(){let i=[],e=0;for(;;){if(e+4>=this.chapters.length)return i.push(this.make_openings_section_stats(e,this.chapters.length)),i;i.push(this.make_openings_section_stats(e,e+4)),e+=4}}make_openings_section_stats(i,e){let r=i/4,d=e-i,h,l=0,_=0,p=0,u=0,a=0;return this.chapters.slice(i,e).forEach((c,v)=>{(h===void 0||c.practice_progress<h)&&(h=c.practice_progress,a=i+v),l+=c.quiz_pass,_+=c.quiz_fail,p+=c.dm_pass,u+=c.dm_fail}),new ui(r,h,l,_,p,u,a,d)}}class ui{constructor(i,e,r,d,h,l,_,p=4){this.section=i,this.practice=e,this.quiz_pass=r,this.quiz_fail=d,this.deathmatch_pass=h,this.deathmatch_fail=l,this.i_minimum_practice=_,this.nb_chapters=p}get practice_threshold(){return this.practice===100?100:this.practice>90?90:this.practice>60?60:this.practice>30?30:0}get low_chapter(){return this.section*4+1}get high_chapter(){return this.low_chapter+this.nb_chapters-1}get quiz_attempted(){return this.quiz_pass+this.quiz_fail}get deathmatch_attempted(){return this.deathmatch_pass+this.deathmatch_fail}}const gi=()=>{const n=li(),i=D.openings.filter(a=>a.study_link!==""),[e,r]=vt(D.all[0].study_link),d=A(()=>D.study_by_id(e())),h=A(()=>new pi(e())),l=A(()=>h().all_sections),_=A(()=>h().sections),p=a=>e()===a?"active":"",u=a=>{ai.i_chapter=a,n(`/openings/${e()}`)};return(()=>{var a=ri(),c=a.firstChild,v=c.nextSibling,f=v.firstChild,o=f.nextSibling,mt=o.firstChild,J=mt.firstChild,K=J.firstChild,L=K.nextSibling,ft=L.firstChild,x=J.nextSibling,ot=x.firstChild;ot.nextSibling;var bt=x.nextSibling,O=bt.firstChild,St=O.firstChild,xt=St.nextSibling,Ct=xt.nextSibling,T=Ct.firstChild,zt=T.firstChild,U=zt.nextSibling;U.nextSibling;var wt=T.nextSibling,C=wt.firstChild,qt=C.firstChild,V=qt.nextSibling;V.nextSibling;var M=C.nextSibling,yt=M.firstChild,W=yt.nextSibling;W.nextSibling;var X=O.nextSibling,kt=X.firstChild,Pt=kt.nextSibling,At=Pt.nextSibling,Q=At.firstChild,Ft=Q.firstChild,Y=Ft.nextSibling;Y.nextSibling;var Dt=Q.nextSibling,z=Dt.firstChild,Et=z.firstChild,Z=Et.nextSibling;Z.nextSibling;var R=z.nextSibling,Ot=R.firstChild,tt=Ot.nextSibling;return tt.nextSibling,t(c,g(gt,{each:i,children:s=>(()=>{var $=hi();return $.$$click=()=>r(s.study_link),t($,()=>s.study_name),E(()=>S($,p(s.study_link))),$})()})),t(f,()=>d().study_name),K.$$click=()=>u(0),t(L,()=>l().practice_threshold,ft),x.$$click=()=>u(l().i_minimum_practice),t(x,g($t,{get width(){return l().practice}}),null),t(T,()=>l().deathmatch_attempted,U),t(C,()=>l().deathmatch_pass,V),t(C,()=>l().deathmatch_attempted,null),t(M,()=>l().deathmatch_fail,W),t(M,()=>l().deathmatch_attempted,null),t(O,g(F,{get pass(){return l().deathmatch_pass},get fail(){return l().deathmatch_fail}}),null),t(Q,()=>l().quiz_attempted,Y),t(z,()=>l().quiz_pass,Z),t(z,()=>l().quiz_attempted,null),t(R,()=>l().quiz_fail,tt),t(R,()=>l().quiz_attempted,null),t(X,g(F,{get pass(){return l().quiz_pass},get fail(){return l().quiz_fail}}),null),t(o,g(gt,{get each(){return _()},children:s=>(()=>{var $=di(),it=$.firstChild,b=it.firstChild,Tt=b.firstChild,et=Tt.nextSibling;et.nextSibling;var lt=b.nextSibling,Mt=lt.firstChild,w=it.nextSibling,Qt=w.firstChild;Qt.nextSibling;var Rt=w.nextSibling,N=Rt.firstChild,Nt=N.firstChild,q=Nt.nextSibling,jt=q.firstChild,st=jt.nextSibling;st.nextSibling;var Bt=q.nextSibling,j=Bt.firstChild,Gt=j.firstChild,at=Gt.nextSibling;at.nextSibling;var Ht=j.nextSibling,y=Ht.firstChild,It=y.firstChild,nt=It.nextSibling;nt.nextSibling;var B=y.nextSibling,Jt=B.firstChild,rt=Jt.nextSibling;rt.nextSibling;var ht=N.nextSibling,Kt=ht.firstChild,k=Kt.nextSibling,Lt=k.firstChild,dt=Lt.nextSibling;dt.nextSibling;var Ut=k.nextSibling,G=Ut.firstChild,Vt=G.firstChild,ct=Vt.nextSibling;ct.nextSibling;var Wt=G.nextSibling,P=Wt.firstChild,Xt=P.firstChild,_t=Xt.nextSibling;_t.nextSibling;var H=P.nextSibling,Yt=H.firstChild,pt=Yt.nextSibling;return pt.nextSibling,b.$$click=()=>u(s.low_chapter-1),t(b,()=>s.low_chapter,et),t(b,()=>s.high_chapter,null),t(lt,()=>l().practice_threshold,Mt),w.$$click=()=>u(s.i_minimum_practice),t(w,g($t,{get width(){return s.practice}}),null),t(q,()=>s.low_chapter,st),t(q,()=>s.high_chapter,null),t(j,()=>s.deathmatch_attempted,at),t(y,()=>s.deathmatch_pass,nt),t(y,()=>s.deathmatch_attempted,null),t(B,()=>s.deathmatch_fail,rt),t(B,()=>s.deathmatch_attempted,null),t(N,g(F,{get pass(){return s.deathmatch_pass},get fail(){return s.deathmatch_fail}}),null),t(k,()=>s.low_chapter,dt),t(k,()=>s.high_chapter,null),t(G,()=>s.quiz_attempted,ct),t(P,()=>s.quiz_pass,_t),t(P,()=>s.quiz_attempted,null),t(H,()=>s.quiz_fail,pt),t(H,()=>s.quiz_attempted,null),t(ht,g(F,{get pass(){return s.quiz_pass},get fail(){return s.quiz_fail}}),null),$})()}),null),a})()},$i=()=>"Masters",vi=()=>"Endgames",mi=()=>"Tactics",$t=n=>(()=>{var i=ci(),e=i.firstChild;return E(r=>I(e,`width: ${n.width}%;`,r)),i})(),F=n=>(()=>{var i=_i(),e=i.firstChild,r=e.nextSibling;return E(d=>{var h=`width: ${n.pass}%;`,l=`width: ${n.fail}%;`;return d.e=I(e,h,d.e),d.t=I(r,l,d.t),d},{e:void 0,t:void 0}),i})(),fi={openings:gi,masters:$i,endgames:vi,tactics:mi};ei(["click"]);export{zi as default};
