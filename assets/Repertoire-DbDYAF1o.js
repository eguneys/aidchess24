var F=Object.defineProperty;var L=(d,t,c)=>t in d?F(d,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):d[t]=c;var I=(d,t,c)=>(L(d,typeof t!="symbol"?t+"":t,c),c);import{h as O,j,k as M,b as q,l as w,o as P,i as o,c as n,F as B,f as A,g as G,S as E,e as Q,M as R,s as U,d as W,t as r,m as Y}from"./index-BLan1KcS.js";/* empty css                   */import{S as z}from"./studyrepo-DtaDbwwa.js";import{S as H,C as J}from"./Shalala-DwYoXUB2.js";import{C as K,T as V}from"./Chesstree2-7yskZiwj.js";import{I as X}from"./chess_pgn_logic-D2-YkZCb.js";var Z=r("<div class=progress><div class=bar></div><h3>"),ee=r("<div class=list-wrap><h1 class=header>Repertoire</h1><div class=list><div><h3 class=title></h3></div><ul>"),te=r("<div class=repertoire>"),le=r("<li><div><h3></h3> "),re=r("<div class=board-wrap>"),ae=r("<h2>Select an Option"),se=r("<button><span> Play all Moves "),ie=r("<button><span> Play as Match "),ne=r("<h2>Play as Match"),oe=r("<small> AI will play the random next move "),de=r("<div class=in_mode><button><span> Rematch </span></button><button class=end2><span> End Practice "),ce=r("<h2>Play all moves"),_e=r("<div class=in_mode><button><span> Clear </span></button><button class=end2><span> End Practice "),he=r("<div class=replay-wrap><div class=replay-header><div class=title><h5>Slav Defense</h5><h4></h4></div><h3 class=lichess><a target=_blank>lichess</a></h3></div><div class=replay><div class=replay-v></div><div class=tools>");class me{constructor(){I(this,"_mode");this._mode=M(void 0,{equals:!1})}get mode(){return this._mode[0]()}set mode(t){this._mode[1](t)}}const N=d=>(()=>{var t=Z(),c=t.firstChild,C=c.nextSibling;return o(C,()=>`%${d.width}`),A(f=>Y(c,`width: ${d.width}%`,f)),t})(),we=()=>{const d=O(),[t]=j(d.id,z.read_study),[c,C]=M(0),f=q(()=>{var e;return(e=t())==null?void 0:e.chapters[c()]});let _=new H,[$,T]=M(void 0);w(()=>{s.mode;let e=f();if(e){let l=V.make(e.pgn.tree.clone);T(l)}}),w(P(()=>_.add_uci,e=>{var i;if(!e)return;((i=$())==null?void 0:i.try_next_uci_fail(e))&&s.mode==="match"&&setTimeout(()=>{var h;(h=$())==null||h.reveal_one_random()},400)})),w(P(()=>{var e;return(e=$())==null?void 0:e.fen_last_move},e=>{if(e){let[l,i]=e;_.on_set_fen_uci(l,i)}else _.on_set_fen_uci(X)})),w(P(()=>_.on_wheel,e=>{var l;e&&((l=$())==null||l.on_wheel(e))}));const D=e=>{const l=e.target;l.tagName!=="PIECE"&&l.tagName!=="SQUARE"&&l.tagName!=="CG-BOARD"||(e.preventDefault(),_.set_on_wheel(Math.sign(e.deltaY)))};let s=new me;return(()=>{var e=te();return e.addEventListener("wheel",D),o(e,n(E,{get when(){return!t.loading},fallback:"Loading...",get children(){var l=ee(),i=l.firstChild,h=i.nextSibling,m=h.firstChild,S=m.firstChild,y=m.nextSibling;return o(S,()=>t().name),o(m,n(N,{width:30}),null),o(y,n(B,{get each(){return t().chapters},children:(x,g)=>(()=>{var u=le(),p=u.firstChild,b=p.firstChild;return b.nextSibling,u.$$click=()=>C(g()),o(b,()=>x.name),o(p,n(N,{width:0}),null),A(()=>G(u,g()===c()?"active":"")),u})()})),l}}),null),o(e,n(E,{get when(){return f()},children:l=>[(()=>{var i=re();return o(i,n(J,{get movable(){return s.mode!==void 0},get doPromotion(){return _.promotion},get onMoveAfter(){return _.on_move_after},get fen_uci(){return _.fen_uci},get color(){return _.turnColor},get dests(){return _.dests}})),i})(),(()=>{var i=he(),h=i.firstChild,m=h.firstChild,S=m.firstChild,y=S.nextSibling,x=m.nextSibling,g=x.firstChild,u=h.nextSibling,p=u.firstChild,b=p.nextSibling;return o(y,()=>l().name),o(p,n(E,{get when(){return $()},children:a=>n(K,{get lala(){return a()}})})),o(b,n(Q,{get children(){return[n(R,{get when(){return s.mode===void 0},get children(){return[ae(),(()=>{var a=se();return a.$$click=()=>s.mode="moves",a})(),(()=>{var a=ie();return a.$$click=()=>s.mode="match",a})()]}}),n(R,{get when(){return s.mode==="match"},get children(){return[ne(),oe(),(()=>{var a=de(),v=a.firstChild,k=v.nextSibling;return v.$$click=()=>{s.mode="match"},k.$$click=()=>s.mode=void 0,a})()]}}),n(R,{get when(){return s.mode==="moves"},get children(){return[ce(),(()=>{var a=_e(),v=a.firstChild,k=v.nextSibling;return v.$$click=()=>{s.mode="moves"},k.$$click=()=>s.mode=void 0,a})()]}})]}})),A(()=>U(g,"href",l().site)),i})()]}),null),e})()};W(["click"]);export{we as default};
