import{m as G,c,S as k,t as h,g as _,a as L,C as H,n as R,i as a,F as T,j as N,k as E,d as I,B as M,q as U}from"./index-DaPMTHvT.js";var W=h("<span>Loading..."),J=h("<h3>There are no favorite openings."),K=h("<div class=challenges><div class=list><div class=filter><span>Filter:</span><span class=all><span>All</span><span>Favorites</span></span></div><div class=table-wrap><div class=head><span>ECO</span><span>NAME</span><span>PGN</span><span>ACHIEVEMENTS</span></div><div class=body></div></div></div><div class=details>"),Q=h("<div><span></span><span></span><span></span><span>0"),X=h("<button>Remove from Favorites"),Y=h("<div class=opening><div class=header><h3></h3><h3 class=name></h3></div><div class=pgn><span></span></div><div class=achievements><h3>Achievements (<span></span>)</h3><div class=ul-wrap><ul></ul></div></div><div class=settings><small class=clear>Clear Achievements</small></div><div class=challenge><h3>Challenge Stockfish</h3><div class=controls><div class=labels><label for=level>Level:</label><label for=time>Time Control:</label><label for=color>Color:</label></div><div class=selects><select id=level name=level><option value=5>Level 5</option><option value=6>Level 6</option><option value=7>Level 7</option><option value=8>Level 8</option></select><select id=time name=time><option value=blitz>Blitz</option><option value=rapid>Rapid</option><option value=classical>Classical</option></select><select id=color name=color><option value=white>White</option><option value=black>Black</option></select></div></div><div class=buttons><button>Challenge This Opening</button><button>Challenge an Unprepared Opening"),Z=h("<button>Add to Favorites"),ee=h("<li>");const te=t=>{for(var e=0,i=0,l=t.length;i<l;)e=(e<<5)-e+t.charCodeAt(i++)<<0;return e+2147483647+1},ie=()=>Promise.all([fetch("openings/a.tsv").then(t=>t.text()),fetch("openings/b.tsv").then(t=>t.text()),fetch("openings/c.tsv").then(t=>t.text()),fetch("openings/d.tsv").then(t=>t.text()),fetch("openings/e.tsv").then(t=>t.text())]).then(t=>t.flatMap(e=>e.trim().split(`
`).slice(1).map(i=>{let[l,v,f]=i.split("	");return{id:te(v+f),eco:l,name:v,pgn:f}}))),oe=()=>{const[t]=G(ie);return c(k,{get when(){return t.loading||!t()},get fallback(){return c(le,{get openings(){return t()}})},get children(){return W()}})};class ne{_filter_tab;_favorites;get filter_tab(){return this._filter_tab[0]()}set filter_tab(e){this._filter_tab[1](e)}get favorites(){return this._favorites[0]()}is_favorite(e){return this.favorites.includes(e.id)}add_favorite(e){let i=this.favorites;i=i.filter(l=>l!==e.id),i.push(e.id),this._favorites[1](i)}remove_favorite(e){let i=this.favorites;i=i.filter(l=>l!==e.id),this._favorites[1](i)}constructor(){this._filter_tab=M("all","challenges.filter_tab");let e=[];this._favorites=M(e,"challenges.favorites")}}const b=new ne;class B{constructor(e){this.opening=e,this.achievements=_(()=>[]),this.is_favorite=_(()=>b.is_favorite(e))}achievements;is_favorite;clear_stats(){}add_to_favorites(){b.add_favorite(this.opening)}remove_from_favorites(){b.remove_favorite(this.opening)}get eco(){return this.opening.eco}get name(){return this.opening.name}get pgn(){return this.opening.pgn}get id(){return this.opening.id}}const le=t=>{const e=_(()=>b.filter_tab),i=n=>b.filter_tab=n,[l,v]=L(),f=_(H(()=>t.openings,n=>new B(n))),o=_(()=>{let n=f();return e()==="fav"&&(n=n.filter(d=>d.is_favorite())),l()==="achievements"&&n.sort((d,g)=>g.achievements().length-d.achievements().length),n}),[C,u]=L(o()[0]?.id),x=_(()=>o().find(n=>n.id===C()));return R(U(e,()=>{u(o()[0]?.id)})),(()=>{var n=K(),d=n.firstChild,g=d.firstChild,w=g.firstChild,A=w.nextSibling,$=A.firstChild,r=$.nextSibling,S=g.nextSibling,O=S.firstChild,P=O.firstChild,V=P.nextSibling,y=V.nextSibling,z=y.nextSibling,j=O.nextSibling,q=d.nextSibling;return $.$$click=()=>i("all"),r.$$click=()=>i("fav"),z.$$click=()=>l()===void 0?v("achievements"):v(),a(j,c(k,{get when(){return o().length===0},get fallback(){return c(T,{get each(){return o()},children:s=>(()=>{var p=Q(),m=p.firstChild,F=m.nextSibling,D=F.nextSibling;return p.$$click=()=>u(s.id),a(m,()=>s.eco),a(F,()=>s.name),a(D,()=>s.pgn),N(()=>E(p,"row"+(C()===s.id?" active":""))),p})()})},get children(){return J()}})),a(q,c(k,{get when(){return x()},children:s=>c(se,{get opening(){return s().opening}})})),N(s=>{var p=e()==="all"?"active":"",m=e()==="fav"?"active":"";return p!==s.e&&E($,s.e=p),m!==s.t&&E(r,s.t=m),s},{e:void 0,t:void 0}),n})()},se=t=>{let e=_(()=>new B(t.opening));return R(()=>{console.log(e().is_favorite())}),(()=>{var i=Y(),l=i.firstChild,v=l.firstChild,f=v.nextSibling,o=l.nextSibling,C=o.firstChild,u=o.nextSibling,x=u.firstChild,n=x.firstChild,d=n.nextSibling,g=x.nextSibling,w=g.firstChild,A=u.nextSibling,$=A.firstChild;return a(v,()=>e().eco),a(f,()=>e().name),a(l,c(k,{get when(){return e().is_favorite()},get fallback(){return(()=>{var r=Z();return r.$$click=()=>e().add_to_favorites(),r})()},get children(){var r=X();return r.$$click=()=>e().remove_from_favorites(),r}}),null),a(C,()=>e().pgn),a(d,()=>e().achievements().length),a(w,c(T,{get each(){return e().achievements()},children:r=>(()=>{var S=ee();return a(S,c(ae,{achievement:r})),S})()})),$.$$click=()=>e().clear_stats(),i})()},ae=t=>"hello";I(["click"]);export{oe as default};
